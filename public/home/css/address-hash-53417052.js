(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'");}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var tool,config;tool={data:{ajaxUrl:{myiToken:"//myi.vip.com/api/common/get_verify_token",
maxAddressNum:"//myi.vip.com/api/address/limitnum",getOwnAddress:"//myi.vip.com/api/address",addressInfo:"//gensvr-n.vip.com/address/address",deleteAddress:"//myi.vip.com/api/address/${address_id}/del",setAddressDef:"//myi.vip.com/api/address/${address_id}/setdefault",updateAddress:"//myi.vip.com/api/address/${address_id}/edit",createAddress:"//myi.vip.com/api/address/add",checkAddress:"//myi.vip.com/api/address/checkAddress"},addressData:[],maxAddressNum:function(){$.ajax({url:tool.data.ajaxUrl.maxAddressNum+
"?v="+Math.random(),dataType:"json"}).done(function(rtn){tool.ev.notLogin(rtn);var code=rtn.code;var maxNum;if("200"==code&&rtn.data)maxNum=rtn.data.limitnum;maxNum=maxNum?maxNum:10;$("#J-max-address-num").html(maxNum);var ownNum=$("#J-own-address-num").html();if(ownNum<maxNum){$(".J-btn-add-address").removeClass("ui-btn-disable");$("#J-address-form").removeClass("f-hidden");tool.ui.cleanAddressForm()}else{$(".J-btn-add-address").addClass("ui-btn-disable");$("#J-address-form").addClass("f-hidden")}return maxNum})},
getMyiToken:function(){$.ajax({url:tool.data.ajaxUrl.myiToken+"?v="+Math.random(),dataType:"json"}).done(function(rtn){tool.ev.notLogin(rtn);var code=rtn.code;if("200"==code)config.myiToken=rtn.myitoken})},loadAddress:function(){$.ajax({url:tool.data.ajaxUrl.getOwnAddress+"?v="+Math.random(),dataType:"json"}).done(function(rtn){tool.ev.notLogin(rtn);var code=rtn.code;var data=rtn.data;if("200"==code){tool.data.addressData=data;tool.ui.showOwnAddress(data)}})},addressesIsCOD:function(addressData){for(var i=
0;i<addressData.length;i++)(function(id,i){$.ajax({url:tool.data.ajaxUrl.addressInfo+"?areaid="+id,dataType:"jsonp",success:function(rtn){tool.ev.notLogin(rtn);if("1"!=rtn.info.is_cod)tool.ui.addressUnsupportCOD(i)}})})(addressData[i].area_id||"",i)},addressIsCOD:function(addressId,cal){(function(id,cal){$.ajax({url:tool.data.ajaxUrl.addressInfo+"?areaid="+id,dataType:"jsonp",success:function(rtn){tool.ev.notLogin(rtn);cal(rtn)}})})(addressId,cal)},deleteAddress:function(address_id){if(!config.myiToken){tool.ui.showDialog(false,
"\u8bf7\u6c42\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002");return false}$.ajax({url:tool.data.ajaxUrl.deleteAddress.replace("${address_id}",address_id),data:{myitoken:config.myiToken},type:"post",dataType:"json"}).done(function(rtn){tool.ev.notLogin(rtn);var code=rtn.code;if("200"==code)tool.data.loadAddress();else tool.ui.showDialog(false,"\u6536\u8d27\u5730\u5740\u5220\u9664\u5931\u8d25\uff01~")})},setAddressDef:function(selectId,address_id){if(!config.myiToken){tool.ui.showDialog(false,
"\u8bf7\u6c42\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002");return false}$.ajax({url:tool.data.ajaxUrl.setAddressDef.replace("${address_id}",address_id),data:{myitoken:config.myiToken},type:"post",dataType:"json"}).done(function(rtn){tool.ev.notLogin(rtn);var code=rtn.code;if("200"==code){$(".J-address-info-default .J-set-address-default").html("\u8bbe\u4e3a\u9ed8\u8ba4\u5730\u5740").attr("mars_sead","235|2|1|4");$(".J-address-info-default").removeClass("m-address-info-default").removeClass("J-address-info-default");
$(selectId).parent().addClass("m-address-info-default").addClass("J-address-info-default");$(".J-address-info-default .J-set-address-default").html("\u9ed8\u8ba4\u5730\u5740").removeAttr("mars_sead")}else tool.ui.showDialog(false,"\u6536\u8d27\u5730\u5740\u6682\u65f6\u65e0\u6cd5\u4fee\u6539\uff01~")})},loadAreaInfo:function(selectId,area_id,isOpen,ca){(function(selectId,area_id,isOpen){$.ajax({url:tool.data.ajaxUrl.addressInfo,data:{v:Math.random(),areaid:area_id},dataType:"jsonp",success:function(rtn){tool.ev.notLogin(rtn);
var postCode=rtn.info.post_code;$("#postCode").val(postCode);var areaList=rtn.list;if(areaList){if(rtn.info.is_directly=="1"){selectId.addClass("f-hidden");selectId=selectId.next()}selectId.removeClass("f-hidden");if(rtn.info.has_children=="0"){selectId.addClass("f-hidden");selectId.nextAll().addClass("f-hidden")}tool.ui.showAddressDropdown(selectId,areaList,isOpen);selectId.addClass("J-dropdown-selecting");ca(selectId)}}})})(selectId,area_id,isOpen,ca)},checkAddress:function(addressId,cb){$.ajax({url:tool.data.ajaxUrl.checkAddress,
data:{addressId:addressId},dataType:"json"}).done(function(rtn){tool.ev.notLogin(rtn);cb&&cb(rtn)})},initOwnAddrData:function(fourRankAddr,areaId){$.ajax({url:tool.data.ajaxUrl.addressInfo,data:{v:Math.random(),areaid:areaId},dataType:"jsonp",success:function(rtn){tool.ev.notLogin(rtn);var areaList=rtn.list;var areaInfo=rtn.info;var address={};address.select=areaId;address.data=rtn;fourRankAddr.push(address);if(areaInfo){var parentCode=areaInfo.parent_code;if(parentCode&&parentCode!="")tool.data.initOwnAddrData(fourRankAddr,
parentCode);else tool.ui.showOwnFourAddr(fourRankAddr)}}})},verifyData:{replaceName:function(str){return str.replace(/(\u3002|\uff0e|\.)/g,"\u00b7")},checkName:function(val){var checkFirstWord=/^[\u4e00-\u9fa5]/gi;var checkLastWord=/[\u4e00-\u9fa5]$/gi;var checkMiddleWord=/^[\u4e00-\u9fa5\u00b7]{0,}$/gi;if(!val)return config.formErrorMsg.consigneeEmpty;else if(val.length>16)return config.formErrorMsg.consigneeMaxLength;else if(!checkFirstWord.test(val)||(!checkLastWord.test(val)||!checkMiddleWord.test(val)))return config.formErrorMsg.consigneeSupportZH;
else return"success"},checkMobile:function(val){return/^1[3456789]\d{9}$/.test(val)},checkSparePhone:function(val){return/^1[3456789]\d{9}$/.test(val)?true:/^\d+([-]\d+)+$/.test(val)}},updateAddress:function(func){var addressId=$.trim($("#addressId").val());if(!config.myiToken){config.submitOnce=true;tool.ui.showDialog(false,"\u8bf7\u6c42\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002");return false}$.ajax({url:tool.data.ajaxUrl.updateAddress.replace("${address_id}",addressId),
data:tool.data.getAddressListInfo(),dataType:"json",type:"post",success:function(rtn){tool.ev.notLogin(rtn);config.submitOnce=true;if(rtn.code==200){tool.ui.showDialog(true,"\u5730\u5740\u4fee\u6539\u6210\u529f\uff01");tool.data.loadAddress();tool.ui.cleanAddressForm();var _offset=$(".m-own-address").offset();$("body,html").animate({scrollTop:_offset.top},300)}else tool.ui.showDialog(false,"\u6536\u8d27\u5730\u5740\u4fdd\u5b58\u672a\u6210\u529f\uff01\u8bf7\u7a0d\u540e\u91cd\u8bd5~")}})},addAddress:function(func){var addressId=
$.trim($("#addressId").val());if(!config.myiToken){config.submitOnce=true;tool.ui.showDialog(false,"\u8bf7\u6c42\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002");return false}$.ajax({url:tool.data.ajaxUrl.createAddress,data:tool.data.getAddressListInfo(),dataType:"json",type:"post",success:function(rtn){tool.ev.notLogin(rtn);config.submitOnce=true;if(rtn.code==200){tool.ui.showDialog(true,"\u6536\u8d27\u5730\u5740\u4fdd\u5b58\u6210\u529f~<p><span id='mytimeout'>5</span>\u79d2\u540e\u81ea\u52a8\u5173\u95ed\u7a97\u53e3</p>");
var timeout=5;var callSelf=function(){if(timeout){$(".m-dialog #mytimeout").html(--timeout);if(timeout>0)setTimeout(callSelf,1E3);else $(".J-dialog-btn-close").click()}};callSelf();tool.data.loadAddress();tool.ui.cleanAddressForm();var _offset=$(".m-own-address").offset();$("body,html").animate({scrollTop:_offset.top},300)}else if(rtn.code==5001)tool.ui.showDialog(false,"\u6536\u8d27\u5730\u5740\u4fdd\u5b58\u672a\u6210\u529f\uff01","\u5730\u5740\u8584\u6700\u591a\u53ef\u4ee5\u4fdd\u5b5810\u4e2a\u6709\u6548\u5730\u5740\uff0c\u8bf7\u5148\u5220\u9664\u4e0d\u7528\u7684\u5730\u5740\u540e\u518d\u65b0\u589e\u5730\u5740\u3002");
else tool.ui.showDialog(false,"\u6536\u8d27\u5730\u5740\u4fdd\u5b58\u672a\u6210\u529f\uff01\u8bf7\u7a0d\u540e\u91cd\u8bd5~")}})},getAddressListInfo:function(){var _inputs={consignee:$("#consignee").val(),area_id:$(".J-dropdown-selected:last .J-dropdown-current").attr("data"),post_code:$("#postCode").val(),address:$("#addressInfo").val(),phone:$("#mobile").data("edit")?$("#mobile").val():"",telephone:$("#telephone").data("edit")?$("#telephone").val():"",addrType:$("input[name='adressType']:checked").val()||
"0",myitoken:config.myiToken};return _inputs},setStrLen:function(str,len){str=str.toString().split("");var re=/[^\u4e00-\u9fa5]/g;var newStr="";var l=0;for(var i=0;i<str.length;i++)if(l<len)if(re.test(str[i])){l+=0.5;newStr+=str[i]}else{l+=1;newStr+=str[i]}str="";str=newStr.length+2>len?newStr+"...":newStr;return str}},ev:{init:function(){tool.data.loadAddress();tool.data.getMyiToken();tool.ui.addressDropDown();tool.ui.addressTipsHover();tool.ui.addressModifyBtn();tool.ui.addressDeleteBtn();tool.ui.addressDeleteDialog();
tool.ui.addressDefaultBtn();tool.ui.initAddressDropdown();tool.ev.formEvent();tool.ev.addAddress()},addAddress:function(){$(".J-btn-add-address").on("click",function(){if($(".J-btn-add-address").hasClass("ui-btn-disable"))return false;tool.ui.cleanAddressForm();var pos=$("#J-address-form").offset().top;$("html,body").animate({scrollTop:pos},500)})},verifyForm:{checkConsignee:function(that){var condignee=$.trim(tool.data.verifyData.replaceName($("#consignee").val()));$("#consignee").val(condignee);
var msg=tool.data.verifyData.checkName(condignee);tool.ui.showFormErrorTip($("#consignee"),msg);return"success"==msg},checkAddressInfo:function(){var fourRank=$("#J-four-rank-address").children();fourRank.find(".J-dropdown-hd").removeClass("u-input-error");var addressError=false;var msg="success";fourRank.each(function(){if(!$(this).hasClass("J-dropdown-selected")&&!$(this).hasClass("f-hidden")){$(this).find(".J-dropdown-hd").addClass("u-input-error");msg=config.formErrorMsg.addressNotComplete}});
var addressInfo=$.trim($("#addressInfo").val());$("#addressInfo").val(addressInfo);if(!addressInfo||addressInfo.length>70){addressError=true;msg=config.formErrorMsg.addressNotComplete}if(addressError)tool.ui.showFormErrorTip($("#addressInfo"),msg);else tool.ui.showFormTip($("#addressInfo"),msg);return"success"==msg},checkMobile:function(){var mobile=$("#mobile").val();var defMobile=$("#mobile").attr("defaultData");var msg="success";if(mobile&&!(mobile==defMobile||tool.data.verifyData.checkMobile(mobile)))msg=
config.formErrorMsg.mobileFormat;tool.ui.showFormErrorTip($("#mobile"),msg);return"success"==msg},checkPhone:function(){var mobile=$("#mobile").val();var phone=$("#telephone").val();var defMobile=$("#mobile").attr("defaultData");var defPhone=$("#telephone").attr("defaultData");var msg="success";var isMobileSuc=mobile&&(mobile==defMobile||tool.data.verifyData.checkMobile(mobile));var isPhoneSuc=phone&&(phone==defPhone||tool.data.verifyData.checkSparePhone(phone));if(!mobile&&!phone)msg=config.formErrorMsg.notContactInfo;
else if(phone&&!isPhoneSuc)msg=config.formErrorMsg.telephoneFormat;tool.ui.showFormErrorTip($("#telephone"),msg);return"success"==msg},checkMobileEdit:function(){var hasEdit=$("#mobile").data("edit");if(!hasEdit){$("#mobile").val("");$("#mobile").data("edit",true)}return hasEdit},checkPhoneEdit:function(){var hasEdit=$("#telephone").data("edit");if(!hasEdit){$("#telephone").val("");$("#telephone").data("edit",true)}return hasEdit},formSubmit:function(){var checkForm=tool.ev.verifyForm.checkConsignee()&
tool.ev.verifyForm.checkAddressInfo()&tool.ev.verifyForm.checkMobile()&tool.ev.verifyForm.checkPhone();if(checkForm){if(!config.submitOnce)return;config.submitOnce=false;var addressId=$("#addressId").val();if(addressId)tool.data.updateAddress();else tool.data.addAddress()}}},formEvent:function(){$("#consignee").on("blur",function(){tool.ev.verifyForm.checkConsignee()});$("#addressInfo").on("blur",function(){tool.ev.verifyForm.checkAddressInfo()});$("#mobile").on("focus",function(){tool.ev.verifyForm.checkMobileEdit()});
$("#mobile").on("blur",function(){tool.ev.verifyForm.checkMobile()});$("#telephone").on("focus",function(){tool.ev.verifyForm.checkPhoneEdit()});$("#telephone").on("blur",function(){tool.ev.verifyForm.checkPhone()});$("#J-address-form-submit").on("click",function(){tool.ev.verifyForm.formSubmit()});$("#J-address-form-cancle").on("click",function(){tool.ui.cleanAddressForm();var maxNum=$("#J-max-address-num").html();var ownNum=$("#J-own-address-num").html();if(parseInt(ownNum)<maxNum){$(".J-btn-add-address").removeClass("ui-btn-disable");
$("#J-address-form").removeClass("f-hidden")}else{$(".J-btn-add-address").addClass("ui-btn-disable");$("#J-address-form").addClass("f-hidden")}})},notLogin:function(rtn){if(rtn.code==302){var _url=encodeURIComponent(window.location.href);window.location.href=rtn.data.replace(/src=.*/,"")+_url}}},ui:{addressDefaultBtn:function(){$("#J-own-address-boxs").on("click",".J-address-info:not(.J-address-info-default) .J-set-address-default",function(){tool.data.setAddressDef(this,$(this).parent().attr("data_id"))})},
addressModifyBtn:function(){$("#J-own-address-boxs").on("click",".J-address-buttom .J-btn-modify",function(){var modifyId=this.getAttribute("data_id");var currAddress;if(modifyId){var addressData=tool.data.addressData;if(addressData)for(var i=addressData.length-1;i>=0;i--)if(modifyId==addressData[i].id){currAddress=addressData[i];break}tool.data.checkAddress(modifyId,function(rtn){tool.ui.cleanAddressForm();if(rtn.code==20003){$(".J-own-address-error-tip").text("*\u5df2\u4e3a\u60a8\u5347\u7ea7\u4e3a\u6700\u65b0\u6536\u8d27\u5730\u5740");
$(".J-own-address-error").show();currAddress=rtn.data}if(rtn.code==20002){$(".J-own-address-error-tip").text("*\u539f\u6536\u8d27\u5730\u5740\u5df2\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u6709\u6548\u5730\u5740");$(".J-own-address-error").show()}if($("#J-address-form").hasClass("m-add-address"))$("#J-address-form").removeClass("m-add-address");if(!$("#J-address-form").hasClass("m-modify-address"))$("#J-address-form").addClass("m-modify-address");$("#addressId").val(currAddress.id);$("#consignee").val(currAddress.consignee);
$("#addressInfo").val(currAddress.address);$("#postCode").val(currAddress.post_code);$("#mobile").val(currAddress.mobile);$("#mobile").attr("defaultData",currAddress.mobile);$("#mobile").data("edit",false);$("#telephone").val(currAddress.telephone);$("#telephone").attr("defaultData",currAddress.telephone);$("#telephone").data("edit",false);$("input[name='adressType']").attr("checked",false);$("input[name='adressType'][value="+currAddress.addrType+"]").click();if(rtn.code!=20002)tool.ui.initOwnAreaInfo(currAddress.area_id);
$("#J-address-form").removeClass("f-hidden");$("#J-address-form-cancle").removeClass("f-hidden");var pos=$("#J-address-form").offset().top;$("html,body").animate({scrollTop:pos},500)})}})},addressDeleteBtn:function(){$("#J-own-address-boxs").on("click",".J-address-buttom .J-btn-delete",function(){var tipTop=$(this).offset().top+this.offsetTop-$(".m-delete-address-tip").height()-5;var tipLeft=$(this).offset().left-$(".m-delete-address-tip").width()*0.75+this.offsetWidth/2;$(".m-delete-address-tip").css({"top":tipTop,
"left":tipLeft,"display":"inline-block"});$(".J-address-info .J-address-buttom").removeClass("u-select-this");$(this).parent().addClass("u-select-this");$(".m-delete-address-tip").attr("data_id",this.getAttribute("data_id"))});$(".m-delete-address-tip")},addressDeleteDialog:function(){$(".u-btn-address-delete-cancle").on("click",function(){$(".J-address-info .J-address-buttom").removeClass("u-select-this");$(".m-delete-address-tip").css("display","none");$(".m-delete-address-tip").removeAttr("data_id")});
$(".u-btn-address-delete").on("click",function(){tool.data.deleteAddress($(".m-delete-address-tip").attr("data_id"));$(".m-delete-address-tip").css("display","none")})},addressDropDown:function(){$(".J-dropdown").each(function(){var oDropDown=$(this),hd=oDropDown.find(".J-dropdown-hd"),bd=oDropDown.find(".J-dropdown-bd"),curr=oDropDown.find(".J-dropdown-current");hd.on("click",function(){if(oDropDown.hasClass("z-ui-dropdown-disable"))return false;var openDrop=oDropDown;while(true)if(!openDrop.hasClass("J-dropdown-selecting")){if(!openDrop||
openDrop.length==0)break;openDrop=openDrop.prev();if(openDrop.hasClass("J-dropdown-selecting"))break}else break;openDrop.siblings().removeClass("z-ui-dropdown-open");openDrop.toggleClass("z-ui-dropdown-open")});oDropDown.on("click",".J-dropdown-menu .item",function(){$(this).trigger("select");tool.data.loadAreaInfo(oDropDown.next(),$(this).attr("data-value"),true,function(){})});oDropDown.on("select",".J-dropdown-menu .item",function(){$(this).parents(".J-dropdown").find(".J-dropdown-hd").removeClass("u-input-error");
var sTxt=$(this).html();var sDatatext=$(this).attr("data-text");var sDataId=$(this).attr("data-value");oDropDown.addClass("J-dropdown-selected u-dropdown-selected");$(this).addClass("selected").siblings().removeClass("selected");curr.html(sTxt).attr("title",sDatatext).attr("data",sDataId);oDropDown.add(oDropDown.parent()).removeClass("z-ui-dropdown-open");var addressDisplay="";var prevAddress=oDropDown.prevAll();prevAddress.each(function(i){var curAddress=prevAddress.eq(prevAddress.length-i-1);if(!curAddress.hasClass("f-hidden"))addressDisplay+=
curAddress.find(".ui-dropdown-current").attr("title")+"."});addressDisplay+=oDropDown.find(".ui-dropdown-current").attr("title")+".";$("#J-four-rank-address-display").removeClass("f-hidden");$(".u-four-rank-address-tip").html(addressDisplay);var nextDrop=oDropDown.nextAll();if(nextDrop.length>0){nextDrop.removeClass("J-dropdown-selected u-dropdown-selected");nextDrop.find(".ui-dropdown-current").each(function(){$(this).html($(this).attr("default_title"))});nextDrop.find(".J-dropdown-bd .J-dropdown-menu .J-dropdown-item .item").removeClass("selected")}else{tool.data.addressIsCOD(sDataId,
function(data){if("1"!=data.info.is_cod)tool.ui.showFormTip($("#addressInfo"),"\u6b64\u5730\u533a\u6682\u4e0d\u652f\u6301\u8d27\u5230\u4ed8\u6b3e")});if($("#addressInfo").parents(".ui-form-item-group").hasClass("z-ui-tooltips-in"))tool.ev.verifyForm.checkAddressInfo()}})});document.onmouseup=function(){$(".ui-dropdown").removeClass("z-ui-dropdown-open")}},showOwnAddress:function(data){$("#J-own-address-num").html(data.length);var maxNum=tool.data.maxAddressNum();if(data.length>0){for(var i=0;i<data.length;i++){var area_name=
data[i].area_name;if(area_name){var myAddress=area_name?area_name.split("."):["","","",""];var newArea_name="";for(var l=0;l<myAddress.length;l++){if(myAddress[l]=="\u6211\u4e0d\u6e05\u695a")myAddress[l]="";if(myAddress[l])newArea_name+=myAddress[l]+" "}area_name=newArea_name}else area_name="";if(data[i].address)if(""==area_name)area_name=data[i].address;else area_name=area_name+" "+data[i].address;data[i].showAddress=area_name;if(1==data[i].is_default){var temp=data[0];data[0]=data[i];data[i]=temp}}var addressHtml=
"";for(var i=0;i<data.length;i++){var addressType="u-address-type-other";if("1"==data[i].addrType)var addressType="u-address-type-home";else if("2"==data[i].addrType)var addressType="u-address-type-work";addressHtml+='<div data_id="'+data[i].id+'" data-hover="m-address-info-hover" class="m-address-info J-address-info';if(1==data[i].is_default)addressHtml+=' m-address-info-default J-address-info-default"><p class="u-set-address-default J-set-address-default u-address-major" >\u9ed8\u8ba4\u5730\u5740</p><p class="u-name">';
else addressHtml+='"><p class="u-set-address-default J-set-address-default u-address-major" mars_sead="235|2|1|4">\u8bbe\u4e3a\u9ed8\u8ba4\u5730\u5740</p><p class="u-name">';addressHtml+=data[i].consignee+'</p><p class="u-address '+addressType+'" title="'+data[i].showAddress+'">'+tool.data.setStrLen(data[i].showAddress,32)+'</p><p class="u-contact"><span class="u-mobile">'+data[i].mobile+'</span><span class="u-telephone">'+data[i].telephone+"</span>"+'</p><div class="u-address-buttom J-address-buttom"><a href="javascript:;" role="button" class="u-address-a ui-btn-mini  ui-btn-default u-btn-delete J-btn-delete" data_id="'+
data[i].id+'">\u5220\u9664</a><a href="javascript:;" mars_sead="235|2|1|5" role="button" class="u-address-a ui-btn-mini  ui-btn-default J-btn-modify" data_id="'+data[i].id+'">\u4fee\u6539</a></div></div>'}$("#J-own-address-boxs").html(addressHtml);tool.data.addressesIsCOD(data)}},addressUnsupportCOD:function(index){$("#J-own-address-boxs").children().eq(index).find(".u-address").append('<br><span class="u-unsupport-COD">\uff08\u4e0d\u652f\u6301\u8d27\u5230\u4ed8\u6b3e\uff09</span>')},addressTipsHover:function(){$("#addressTipsIco").hover(function(){$("#addressTips").addClass("z-ui-tooltips-in")},
function(){$("#addressTips").addClass("z-ui-tooltips-out");setTimeout(tool.ui.removeAddressTips,150)})},removeAddressTips:function(){$("#addressTips").removeClass("z-ui-tooltips-in").removeClass("z-ui-tooltips-out")},showDialog:function(success,msg,content){var ele=$(".m-dialog");if(success){$(".J-success-ico").show();$(".J-error-ico").hide()}else{$(".J-success-ico").hide();$(".J-error-ico").show()}$(".ui-dialog-msg").html(msg);if(content)$(".u-msg-content").html(content);var oWin=$(window),nLeft=
(oWin.width()-ele.outerWidth())/2,nTop=(oWin.height()-ele.outerHeight())*0.45;ele.css({left:nLeft,top:nTop}).addClass("z-ui-dialog-in");$(".m-dialog-mask").addClass("f-block");$(".ui-dialog-close").on("click",function(){var target=$(this).parents(".z-ui-dialog-in");target.addClass("z-ui-dialog-out");$(".ui-window-mask").removeClass("f-block");setTimeout(function(){target.removeClass("z-ui-dialog-in z-ui-dialog-out")},350)});$(".J-dialog-btn-close").on("click",function(){var target=$(this).parents(".z-ui-dialog-in");
target.addClass("z-ui-dialog-out");$(".ui-window-mask").removeClass("f-block");setTimeout(function(){target.removeClass("z-ui-dialog-in z-ui-dialog-out")},350)})},initAddressDropdown:function(){tool.data.loadAreaInfo($(".u-four-rank-address").children().eq(0),0,false,function(){})},showAddressDropdown:function(selectId,data,isOpen){var area_html="";var unknowFlag=false;for(var i=0;i<data.length;i++){var id=data[i].id;var name=data[i].name;if(name=="\u6211\u4e0d\u6e05\u695a")unknowFlag=true;if(name&&
name.length>7)name=name.substring(0,7)+"...";area_html+='<span class="item';if(i==0)area_html+=" hidden ";area_html+='" data-text="'+data[i].name+'" data-value="'+id+'" title="'+data[i].name+'">'+name+"</span>"}var fourRankTip=selectId.find("#J-four-rank-tip");if(fourRankTip)if(unknowFlag)fourRankTip.text("*\u9009\u62e9\u51c6\u786e\u7684\u4e61\u9547/\u8857\u9053\u53ef\u63d0\u5347\u9001\u8d27\u901f\u5ea6\uff1b\u5982\u4e0d\u6e05\u695a\uff0c\u53ef\u9009\u62e9\u201c\u6211\u4e0d\u6e05\u695a\u201d\u3002");
else fourRankTip.text("*\u9009\u62e9\u51c6\u786e\u7684\u4e61\u9547/\u8857\u9053\u53ef\u63d0\u5347\u9001\u8d27\u901f\u5ea6\uff1b");selectId.find(".J-dropdown-item").html(area_html);if(isOpen)selectId.addClass("J-dropdown-selecting").addClass("z-ui-dropdown-open")},initOwnAreaInfo:function(areaId){var fourRankAddr=new Array;tool.data.initOwnAddrData(fourRankAddr,areaId)},showOwnFourAddr:function(fourRankAddr){var rankLength=fourRankAddr.length;var addressDropdown=$(".u-four-rank-address .ui-dropdown");
addressDropdown.find(".ui-dropdown-current").each(function(){$(this).html($(this).attr("default_title"))});var ownAddressLength=fourRankAddr.length;if(ownAddressLength<addressDropdown.length)addressDropdown.slice(ownAddressLength).addClass("f-hidden");$(".u-four-rank-address .ui-dropdown .J-dropdown-item").html("");var callSelf=function(i,areaId){tool.data.loadAreaInfo(addressDropdown.eq(i),areaId,false,function(_$select){_$select.find(".J-dropdown-item").children().each(function(){if(fourRankAddr.length>
i&&$(this).attr("data-value")==fourRankAddr[fourRankAddr.length-i-1].select)$(this).trigger("select")});if(i<fourRankAddr.length-1)callSelf(i+1,fourRankAddr[fourRankAddr.length-i-1].select)})};callSelf(0,0)},showFormTip:function(_$sel,msg){var _$itemGroup=_$sel.parents(".ui-form-item-group");if("success"!=msg){_$itemGroup.find(".u-error-msg").text(msg);_$itemGroup.addClass("z-ui-tooltips-in")}else{_$itemGroup.find(".u-error-msg").text("");_$itemGroup.removeClass("z-ui-tooltips-in z-ui-form-item-warning")}},
showFormErrorTip:function(_$sel,msg){tool.ui.showFormTip(_$sel,msg);var _$itemGroup=_$sel.parents(".ui-form-item-group");if("success"!=msg)_$itemGroup.addClass("z-ui-form-item-warning")},cleanAddressForm:function(){if(!$("#J-address-form").hasClass("m-add-address"))$("#J-address-form").addClass("m-add-address");if($("#J-address-form").hasClass("m-modify-address"))$("#J-address-form").removeClass("m-modify-address");$("#addressId").val("");$("#consignee").val("");$("#addressInfo").val("");$("#J-four-rank-address-display").addClass("f-hidden");
$("#mobile").val("");$("#mobile").attr("defaultData","");$("#mobile").data("edit",true);$("#telephone").val("");$("#telephone").attr("defaultData","");$("#telephone").data("edit",true);$("#postCode").val("");$("input[name='adressType']").attr("checked",false);$("#J-address-form .z-ui-tooltips-in").removeClass("z-ui-tooltips-in");$("#J-address-form .z-ui-form-item-warning").removeClass("z-ui-form-item-warning");$(".J-own-address-error").hide();tool.ui.cleanFourRankAddr();$("#J-address-form-cancle").addClass("f-hidden")},
cleanFourRankAddr:function(){$(".J-dropdown").removeClass("J-dropdown-selecting J-dropdown-selected u-dropdown-selected f-hidden");var _$dpdown=$(".J-dropdown .J-dropdown-current");_$dpdown.each(function(){$(this).html($(this).attr("default_title"))});$(".J-dropdown-item").html("");tool.ui.initAddressDropdown()}},config:function(){config={myiToken:"",submitOnce:true,formErrorMsg:{consigneeEmpty:"\u8bf7\u8f93\u5165\u6536\u8d27\u4eba\u59d3\u540d",consigneeMaxLength:"\u6700\u5927\u957f\u5ea6\u4e3a16\u4e2a\u5b57\u7b26",
consigneeSupportZH:"\u6536\u8d27\u4eba\u59d3\u540d\u53ea\u652f\u6301\u4e2d\u6587",addressNotComplete:"\u8bf7\u586b\u5199\u5b8c\u6574\u7684\u5730\u5740\u4fe1\u606f",addressMaxLength:"\u6700\u5927\u957f\u5ea6\u4e3a70\u4e2a\u5b57\u7b26",mobileFormat:"\u624b\u673a\u683c\u5f0f\u4e0d\u6b63\u786e",telephoneFormat:"\u7535\u8bdd\u683c\u5f0f\u4e0d\u6b63\u786e",notContactInfo:"\u8bf7\u81f3\u5c11\u586b\u5199\u4e00\u9879\u8054\u7cfb\u65b9\u5f0f"}}}};$(function(){tool.config();tool.ev.init();var isIE6=navigator.appVersion.indexOf("MSIE 6")>
-1;if(isIE6)$("body").on({mouseenter:function(){$(this).addClass($(this).data("hover"))},mouseleave:function(){$(this).removeClass($(this).data("hover"))}},"[data-hover]")})},{}]},{},[1]);
