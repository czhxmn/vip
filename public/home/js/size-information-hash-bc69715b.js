(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'");}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var Post=require("./../lib/post.js");require("./../lib/panel.js");
var tool,post=Post.post,config;tool={data:{searchSizes:function(args,func){if(!func){func=args;args=undefined}var _url="//myi.vip.com/api/size"+(args&&args.id?args.id:"");post.get(_url,function(rtn){if(rtn.code==200)func(rtn.data);else tool.ui.displayInfoFromType("error")})},setDefault:function(args,func){if(!func){func=args;args=undefined}var _args=["size_id="+config.checkId,"name="+config.informationListDate[config.checkId].name];var _url="//myi.vip.com/api/size/set_default?"+_args.join("&");post.get(_url,
function(rtn){func(rtn)})},deleteInformation:function(args,func){if(!myitoken){post.alert("\u8bf7\u6c42\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002");config.button.deletes.removeClass("clicked");return false}if(!func){func=args;args=undefined}var _url="//myi.vip.com/api/size/delete/"+config.checkId+"?myitoken="+myitoken;post.get(_url,function(rtn){config.button.deletes.removeClass("clicked");if(rtn.code==200)func(rtn);else if(rtn.code==60001)post.alert("\u5f88\u62b1\u6b49\uff0c\u9ed8\u8ba4\u5c3a\u7801\u4e0d\u5141\u8bb8\u5220\u9664");
else post.alert("\u5220\u9664\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")})},addInformation:function(args,func){if(!func){func=args;args=undefined}var _url="//myi.vip.com/api/size/create";var _args={"name":args&&args.name?args.name:$.trim(config.inputs.name.val()),"gender":config.gender,"height":args&&args.height?args.height:$.trim(config.inputs.height.val()),"weight":args&&args.weight?args.weight:$.trim(config.inputs.weight.val()),"bust":args&&args.bust?args.bust:$.trim(config.inputs.bust.val())||
"0","hip":args&&args.hip?args.hip:$.trim(config.inputs.hip.val())||"0","waist":args&&args.waist?args.waist:$.trim(config.inputs.waist.val())||"0"};$.ajax({url:_url,type:"POST",contentType:"application/json",data:JSON.stringify(_args),dataType:"json",success:function(rtn){func(rtn)}})},changeSize:function(args,func){if(!func){func=args;args=undefined}var _url="//myi.vip.com/api/size/update/"+config.checkId;var _args={"name":args&&args.name?args.name:$.trim(config.inputs.name.val()),"gender":config.gender,
"height":args&&args.height?args.height:$.trim(config.inputs.height.val()),"weight":args&&args.weight?args.weight:$.trim(config.inputs.weight.val()),"bust":args&&args.bust?args.bust:$.trim(config.inputs.bust.val())||"0","hip":args&&args.hip?args.hip:$.trim(config.inputs.hip.val())||"0","waist":args&&args.waist?args.waist:$.trim(config.inputs.waist.val())||"0"};$.ajax({url:_url,contentType:"application/json",type:"POST",data:JSON.stringify(_args),dataType:"json",success:function(rtn){func(rtn)}})}},
ev:{checkedSize:function(){config.informationList.on("click",".radio",function(){var _this=$(this);config.checkId=_this.attr("list-id");_this.addClass("hover").parents("tr").siblings().find(".radio").removeClass("hover")})},setDefault:function(){config.button.setDefault.on("click",function(){if(config.checkId==0)post.alert("\u8bf7\u5148\u9009\u62e9\u8981\u8bbe\u7f6e\u7684\u9009\u9879\uff01");if($(this).hasClass("clicked"))return;config.button.setDefault.addClass("clicked");tool.data.setDefault(tool.ui.setDefault)})},
deleteInformation:function(){var deleteEnter=new showBox({"litterTitle":'<i class="icon-wanning"></i><span>\u786e\u8ba4\u5220\u9664\uff1f</span>',"button":'<a href="javascript:;" class="btn-queding btn-queding-delete" data-close="true">\u786e\u5b9a</a><a href="javascript:;" class="btn-quexiao ui-button secondary" data-close="true">\u53d6\u6d88</a>'});$(".show-box").on("click",".btn-queding-delete",function(){config.button.deletes.addClass("clicked");tool.data.deleteInformation(tool.ui.deleteInformation)});
config.button.deletes.on("click",function(){if(config.checkId==0){post.alert("\u8bf7\u5148\u9009\u62e9\u8981\u5220\u9664\u7684\u9009\u9879\uff01");return false}if(config.button.deletes.hasClass("clicked"))return;deleteEnter.show()})},addInformation:function(rtns){config.buttonSaveSize.removeClass("clicked");if(rtns.code==200){tool.data.searchSizes(tool.ui.displaySizeDate);config.saveSuccess.show();$(".btn-queding-save").unbind().click(function(){if(rtns.msg=="1")setTimeout(tool.ui.giveVPoint,500)})}else if(rtns.code==
500)post.alert("\u4fe1\u606f\u586b\u5199\u6709\u8bef\uff0c\u8bf7\u6838\u5bf9\u540e\u91cd\u65b0\u63d0\u4ea4\uff01");else post.alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")},showMeter:function(){for(var i=0;i<config.meterKind.length;i++)(function(i){config.inputs[config.meterKind[i]].on("focus",function(){config.focusRoom=config.meterKind[i];tool.ev.sizeReturnRight()})})(i)},sizeReturnRight:function(){var _this=config.messageNoticeBox.find('[func="'+config.focusRoom+'"]');
for(var l=0;l<config.funcKind.length;l++)config.messageNoticeBox.find('[func="'+config.funcKind[l]+'"]').addClass("hidden");if(_this.length){_this.removeClass("hidden");_this.find(config.genderObj[config.gender]).removeClass("hidden").siblings().addClass("hidden")}else{var _that=config.messageNoticeBox.find('[func="normal"]');_that.removeClass("hidden");_that.find(config.genderObj[config.gender]).removeClass("hidden").siblings().addClass("hidden")}},checkForm:function(){config.inputs.name.on("blur",
function(){tool.ev.checkName()}).on("focus",function(){var _this=$(this);_this.unbindWarning()});config.inputs.height.on("blur",function(){tool.ev.checkName();tool.ev.checkHeight()}).on("focus",function(){var _this=$(this);_this.unbindWarning()});config.inputs.weight.on("blur",function(){tool.ev.checkName();tool.ev.checkHeight();tool.ev.checkWeight()}).on("focus",function(){var _this=$(this);_this.unbindWarning()});var checkInputs=["bust","waist","hip"];for(var i=0;i<checkInputs.length;i++)(function(i){var whichOne=
checkInputs[i];config.inputs[whichOne].on("blur",function(){tool.ev.checkBustDown()}).on("focus",function(){var _this=$(this);_this.unbindWarning()})})(i)},checkInput:function(value){var _val=$.trim(value);var reInt=/^[1-9]?[0-9]+$/g;if(!_val)return null;else if(_val.length>3)return"tooMax";else if(!reInt.test(_val))return"\u6b63\u6574\u6570";else if(_val==0)return"\u975e\u96f6";else return true},checkName:function(){var name=config.inputs.name;name.btrue=false;if(tool.ev.checkInput(name.val())==
null)name.warning({"text":"\u8bf7\u586b\u5199\u79f0\u547c"});else{name.unbindWarning();name.btrue=true}return name.btrue},checkHeight:function(){var height=config.inputs.height;height.btrue=false;if(tool.ev.checkInput(height.val())==null)height.warning({"text":"\u8bf7\u586b\u5199\u8eab\u9ad8","btrue":config.inputs.name.btrue});else if(tool.ev.checkInput(height.val())=="\u6b63\u6574\u6570")height.warning({"text":"\u8bf7\u8f93\u5165\u6b63\u6574\u6570","btrue":config.inputs.name.btrue});else if(tool.ev.checkInput(height.val())==
"tooMax")height.warning({"text":"\u6700\u5927\u957f\u5ea6\u4e3a3\u4e2a\u5b57\u7b26","btrue":config.inputs.name.btrue});else if(tool.ev.checkInput(height.val())=="\u975e\u96f6")height.warning({"text":"\u8bf7\u586b\u5199\u6709\u6548\u8eab\u9ad8","btrue":config.inputs.name.btrue});else{height.unbindWarning();height.btrue=true}return height.btrue},checkWeight:function(){var weight=config.inputs.weight;weight.btrue=false;if(tool.ev.checkInput(weight.val())==null)weight.warning({"text":"\u8bf7\u586b\u5199\u4f53\u91cd",
"btrue":config.inputs.name.btrue&&config.inputs.height.btrue});else if(tool.ev.checkInput(weight.val())=="\u6b63\u6574\u6570")weight.warning({"text":"\u8bf7\u8f93\u5165\u6b63\u6574\u6570","btrue":config.inputs.name.btrue&&config.inputs.height.btrue});else if(tool.ev.checkInput(weight.val())=="tooMax")weight.warning({"text":"\u6700\u5927\u957f\u5ea6\u4e3a3\u4e2a\u5b57\u7b26","btrue":config.inputs.name.btrue&&config.inputs.height.btrue});else if(tool.ev.checkInput(weight.val())=="\u975e\u96f6")weight.warning({"text":"\u8bf7\u586b\u5199\u6709\u6548\u4f53\u91cd",
"btrue":config.inputs.name.btrue&&config.inputs.height.btrue});else{weight.unbindWarning();weight.btrue=true}return weight.btrue},checkBustDown:function(){var checkArr=["bust","waist","hip"];for(var i=0;i<checkArr.length;i++)(function(i){var myName=checkArr[i];var inputsName=config.inputs[myName];inputsName.unbindWarning();inputsName.btrue=false;var btrue=true;for(var l=0;l<i;l++)if(config.inputs[checkArr[l]].btrue==false)btrue=false;if(tool.ev.checkInput(inputsName.val())==null||tool.ev.checkInput(inputsName.val())==
"\u6b63\u6574\u6570")inputsName.warning({"text":"\u8bf7\u8f93\u5165\u6b63\u6574\u6570","btrue":btrue});else if(tool.ev.checkInput(inputsName.val())=="tooMax")inputsName.warning({"text":"\u6700\u5927\u957f\u5ea6\u4e3a3\u4e2a\u5b57\u7b26","btrue":btrue});else{inputsName.unbindWarning();inputsName.btrue=true}})(i)},addMethod:function(){(function(){$.fn.warning=function(options){var defaults={"btrue":true};var opts=$.extend({},defaults,options);return this.each(function(){var _this=$(this);_this.addClass("error-notice");
var $div=$('<span class="ui-tooltips arrow-bottom-left warning"><i class="vipFont if-sigh" style="vertical-align: middle;margin-right: 5px;">&#xe620;</i><span style="vertical-align: middle;"></span></span>');cloneCss(_this,$div);if(opts.btrue===true)if(_this.next().hasClass("warning")){_this.next().find("span").text(opts.text);_this.next().show()}else{$div.find("span").text(opts.text);_this.after($div)}});function cloneCss($parents,$child){$child.css({"position":"absolute","left":$parents.position().left,
"top":-1*$parents.position().top-$parents.outerHeight()-8,"marginLeft":0})}};$.fn.unbindWarning=function(options){return this.each(function(){var _this=$(this);_this.removeClass("error-notice");if(_this.next().hasClass("warning"))_this.next().hide()})}})();(function(){function showBox(options){this.opts={"title":options.title||undefined,"litterTitle":options.litterTitle||undefined,"content":options.content||undefined,"button":options.button||undefined};this.title=oTool.$content.find(".show-title").find("p");
this.litterTitle=oTool.$content.find(".litter-title");this.content=oTool.$content.find(".content");this.button=oTool.$content.find(".show-link")}showBox.prototype.show=function(){oTool.$content.css({"marginTop":-1*oTool.$content.outerHeight()/2}).show();this.opts.title?this.title.html(this.opts.title).parent().removeClass("no-show-title"):this.title.parent().addClass("no-show-title");this.opts.litterTitle?this.litterTitle.html(this.opts.litterTitle).removeClass("hidden"):this.litterTitle.addClass("hidden");
this.opts.content?this.content.html(this.opts.content).removeClass("hidden"):this.content.addClass("hidden");this.opts.button?this.button.html(this.opts.button).removeClass("hidden"):this.button.html('<a href="javascript:;" class="btn-queding" data-close="true">\u786e\u5b9a</a></div>');oTool.$bg.css({"position":"absolute","left":"0","top":"0","width":$("html").outerWidth(),"height":$(document.body).outerHeight(),"opacity":0.3,"background":"#000","zIndex":998}).show()};showBox.prototype.hide=function(){oTool.$content.hide();
oTool.$bg.hide()};function myobj(){window.oTool={};oTool.$bg=$("<div></div>").hide();oTool.$content=$('<div class="show-box">'+'<div class="show-box-bg"></div>'+'<div class="show-container">'+'<div class="show-title"><p>\u63d0\u793a</p><span class="btn-close" data-close="true">x</span></div>'+'<div class="show-content">'+'<div class="litter-title">\u6b22\u8fce\u6765\u5230\u552f\u54c1\u4f1a\uff01</div>'+'<div class="content">\u6b22\u8fce\u6765\u5230\u552f\u54c1\u4f1a\uff01</div>'+"</div>"+'<div class="show-link"><a href="javascript:;" class="btn-queding" data-close="true">\u786e\u5b9a</a></div>'+
"</div>"+"</div>").hide();oTool.$bg.appendTo("body");oTool.$content.appendTo("body");oTool.$content.on("click","*",function(){var _this=$(this);if(_this.data("close")==true){oTool.$content.hide();oTool.$bg.hide();return false}})}myobj();window.showBox=showBox})()},setStrLen:function(str,len){var str=str.toString().split("");var re=/[^\u4e00-\u9fa5]/i;var newStr="";var l=0;for(var i=0;i<str.length;i++){if(re.test(str[i]))l+=0.5;else l+=1;if(l<=len)newStr+=str[i]}var str="";l>len?str=newStr+"...":str=
newStr;return str},changeSize:function(rtns){config.buttonSaveSize.removeClass("clicked");if(rtns.code==200){tool.data.searchSizes(tool.ui.displaySizeDate);config.saveSuccess.show();config.changeOrAdd="add";$(".btn-queding-save").unbind().click(function(){if(rtns.msg=="1")setTimeout(tool.ui.giveVPoint,500)})}else if(rtns.code==500)post.alert("\u4fe1\u606f\u586b\u5199\u6709\u8bef\uff0c\u8bf7\u6838\u5bf9\u540e\u91cd\u65b0\u63d0\u4ea4\uff01");else post.alert("\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01")},
chearInput:function(){config.informationList.addClass("hidden");config.addInformationForm.removeClass("hidden").addClass("active");config.genderBox.find(".radio").eq(0).trigger("click");for(var str in config.inputs)if(config.inputs.hasOwnProperty(str))config.inputs[str].val("")},initEvents:function(){tool.ev.addMethod();tool.ev.checkForm();tool.data.searchSizes(tool.ui.displaySizeDate);$("#tabMysize").on("click",function(){tool.data.searchSizes(tool.ui.displaySizeDate)});tool.ev.checkedSize();tool.ev.setDefault();
tool.ev.deleteInformation();config.goAddInformation.on("click",function(){tool.ev.chearInput()});config.buttonSaveSize.on("click",function(){tool.ev.checkName();tool.ev.checkHeight();tool.ev.checkWeight();if(config.buttonSaveSize.hasClass("clicked"))return;if(tool.ev.checkName()&&(tool.ev.checkHeight()&&tool.ev.checkWeight())){tool.ev.checkBustDown();if(!config.inputs.bust.btrue||(!config.inputs.waist.btrue||!config.inputs.hip.btrue))return false;config.buttonSaveSize.addClass("clicked");if(config.changeOrAdd==
"add")tool.data.addInformation(tool.ev.addInformation);else tool.data.changeSize(tool.ev.changeSize)}});config.genderBox.find(".radio").on("click",function(){var _this=$(this);config.gender=_this.attr("gender");_this.addClass("active").siblings(".radio").removeClass("active");tool.ev.sizeReturnRight()});tool.ev.showMeter();config.button.set.on("click",function(){if(config.checkId==0){post.alert("\u8bf7\u5148\u9009\u62e9\u8981\u4fee\u6539\u7684\u5185\u5bb9\uff01");return false}config.changeOrAdd="change";
var nowData=config.informationListDate[config.checkId];if(nowData.gender=="MALE")config.genderBox.find(".radio").eq(0).trigger("click");else config.genderBox.find(".radio").eq(1).trigger("click");config.informationList.addClass("hidden");config.addInformationForm.removeClass("hidden").addClass("active");for(var str in config.inputs)if(config.inputs.hasOwnProperty(str)&&nowData[str]!="/")config.inputs[str].val(nowData[str])});config.saveSuccess=new showBox({"litterTitle":'<i class="icon-success"></i><span>\u8d44\u6599\u4fdd\u5b58\u6210\u529f</span>',
"button":'<a href="javascript:;" class="btn-queding btn-queding-save" data-close="true">\u786e\u5b9a</a>'});$("#btn_refresh").on("click",function(){tool.data.searchSizes(tool.ui.displaySizeDate)})}},ui:{displaySizeDate:function(rtn){tool.ui.displayInfoFromType("success");config.checkId=0;if(rtn.length){config.addInformationForm.addClass("hidden");config.informationList.removeClass("hidden");var html="";for(var i=0;i<rtn.length;i++){config.informationListDate[rtn[i].id]=rtn[i];if(rtn[i].is_default==
"true")config.checkId=rtn[i].id;var lastlistClass=i==rtn.length-1?"lastlist":"";html+="<tr class="+lastlistClass+">"+'<td class="ta-l" width="25%" height="40">'+'<span list-id="'+rtn[i].id+'" class="radio '+(rtn[i].is_default=="true"?"hover":"")+'"></span><span title="'+rtn[i].name+'">'+tool.ev.setStrLen(rtn[i].name,5)+"</span></td>"+'<td width="15%">'+rtn[i].height+"</td>"+'<td width="15%">'+rtn[i].weight+"</td>"+'<td width="15%">'+rtn[i].bust+"</td>"+'<td width="15%">'+rtn[i].waist+"</td>"+'<td width="15%">'+
rtn[i].hip+"</td>"+"</tr>"}config.informationList.find(".information-bg").find("tbody").html(html);config.goAddInformation[rtn.length>=10?"addClass":"removeClass"]("hidden")}else tool.ev.chearInput()},setDefault:function(rtn){config.button.setDefault.removeClass("clicked");if(rtn.code==200){post.confirm("\u8bbe\u7f6e\u6210\u529f\uff01");tool.data.searchSizes(tool.ui.displaySizeDate)}else post.alert("\u8bbe\u7f6e\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01")},giveVPoint:function(){var $successNotice=
$("#success-notice");$successNotice.removeClass("hidden");var iHeight=30;$successNotice.height(0).stop().animate({"marginTop":10,"height":iHeight,"opacity":1});(function(){var time=6;function autoTime(i){i--;window.timer=setTimeout(function(){clearTimeout(window.timer);if(i>0)autoTime(i);else $successNotice.animate({"height":0,"opacity":0,"marginTop":0},function(){$successNotice.addClass("hidden")})},1E3)}autoTime(time)})()},deleteInformation:function(rtn){delete config.informationListDate[config.checkId];
tool.data.searchSizes(tool.ui.displaySizeDate)},displayInfoFromType:function(type,$modal){var _type={loading:1,success:1,error:1,"null":1,"nullExchange":1};type=_type[type]?type:"loading";$modal=$modal||$("#accountContent");for(var a in _type)if(a!="prototype")$modal.find("[func='"+a+"']")[(type==a?"remove":"add")+"Class"]("hidden")}},config:function(){config={warnStyle:{"backgroundColor":"#ffeded","border":"1px solid #fca1a5"},meterKind:["name","height","weight","bust","waist","hip"],funcKind:["normal",
"bust","waist","hip"],genderObj:{"MALE":".male","FEMALE":".female"},informationList:$("#information-list"),goAddInformation:$("#go-add-information"),addInformationForm:$("#add-information-form"),informationInfo:$("#information-info"),messageNoticeBox:$("#information-message"),buttonSaveSize:$("#save-size"),changeOrAdd:"add",informationListDate:{},genderBox:$("#gender"),gender:"MALE",focusRoom:"normal",checkId:0,button:{"deletes":$("#delete-information"),"set":$("#set-information"),"setDefault":$("#set-default")},
inputs:{name:$("#nickName"),height:$("#userHeight"),weight:$("#userWeight"),bust:$("#userChest"),waist:$("#userWaistline"),hip:$("#userHips")}};post.error(function(rtn){var _url;if(rtn.code==302){_url=encodeURIComponent(window.location.href);window.location.href=rtn.data.replace(/src=.*/,"")+_url}})}};$(document).ready(function(){tool.config();tool.ev.initEvents()})},{"./../lib/panel.js":2,"./../lib/post.js":3}],2:[function(require,module,exports){var tool={},panelTemplate={"defaultUi":'<div class="panel" {{id}} {{style}}>'+
'<div class="background"></div>'+'<div class="content">{{content}}</div>'+'<a href="javascript:;" role="button" class="close">x</a>'+"</div>","Vui":'<div class="ui-dialog ui-dialog-large" {{id}} {{style}}>                                <div class="ui-dialog-inner">                                    <a href="javascript:;" role="button" class="ui-dialog-close vipFont close">\ue609</a>                                    <div class="ui-dialog-content">{{content}}</div>                                </div>                            </div>'};
function Panel(id,content,width,height,opt){this.opt=$.extend({},opt);this.id=id;this.content=content;this.width=width;this.height=height;this.template=this.opt.useVui?panelTemplate.Vui:panelTemplate.defaultUi;this.cover=$('<div class="vct-cover"></div>').css({"height":$(document).height()+"px"});this.closers=[];Panel.fn.items.push(this)}Panel.fn=Panel.prototype={"constructor":Panel,"display":false,"initPanel":function(){var that=this,_style,_content;_style=this.opt.useVui?"":'style="width:'+(this.width?
this.width+"px":"auto")+";height:"+(this.height?this.height+"px":"auto")+'"';this.template=this.template.replace("{{id}}",'id="'+(this.id||"")+'"').replace("{{content}}",this.content||"").replace("{{style}}",_style);this.self=$(this.template);$(document.body).append(this.self);this.self.find(".close").on("click",function(){that.hide()});_content=this.self.find(".content");if(!this.width&&!this.height)this.self.css({"width":_content.width()+30+"px","height":_content.height()+30+"px","left":($(document.body).width()-
(_content.width()+30))/2+"px","top":"50%"});else{this.self.css({"left":($(document).width()-this.width)/2,"top":"50%"});_content.css({"width":this.width-30+"px","height":this.height-30+"px"})}return this},"show":function(){var that=this,_style,_top;if(!that.self)that.initPanel();if(that.display){that.cover.css("min-height",$(document.body).height());return that}_top=$(document).scrollTop()+(window.screen.height-that.self.height())/2-50;that.self.css({"display":"block","z-index":tool.config.zindex*
2+1E3,"top":_top<100?100:_top+"px","visibility":"visible"}).removeClass("z-ui-dialog-out").addClass("z-ui-dialog-in");that.cover.css({"min-height":$(document.body).height(),"z-index":tool.config.zindex*2+999}).show().appendTo($("body"));tool.config.zindex++;tool.config.modal.hide();that.display=true;return that},"hide":function(isClean){if(!this.display)return this;for(var i=0;i<this.closers.length;i++)if(this.closers[i]()===false)return;this.cover.hide().remove();if(isClean)return $(this.id?"#"+
this.id:".panel").remove();$(this.id?"#"+this.id:".panel").css({"display":"none","visibility":"hidden"}).removeClass("z-ui-dialog-in").addClass("z-ui-dialog-out");this.display=false;tool.display();tool.config.zindex--;return this},"onClose":function(callback){this.closers.push(callback)},"clean":function(){if(!this.display)return this;this.self.remove();this.cover.remove();this.display=false;tool.display();tool.config.zindex--;return this},items:[],zindex:0};window.Panel=Panel;tool.config={count:0,
zindex:0,modal:$("#walletCode , #walletCode2").parent()};tool.display=function(){tool.config.modal.show()};tool.Panel=Panel;module.exports=tool},{}],3:[function(require,module,exports){var tool,config,Post,Ajax,manage;manage=function(){var _self=this,_rtn=function(url,data,callback,type){_self.post.apply(_self,arguments)};_rtn.ajax=function(){return _self.ajax.apply(_self,arguments)};_rtn.post=function(){return _self.post.apply(_self,arguments)};_rtn.get=function(){return _self.get.apply(_self,arguments)};
_rtn.error=function(){return _self.error.apply(_self,arguments)};_rtn.confirm=function(){return _self.confirm.apply(_self,arguments)};_rtn.alert=function(){return _self.alert.apply(_self,arguments)};_rtn.loading=function(){return _self.loading.apply(_self,arguments)};_rtn.error=function(){return _self.error.apply(_self,arguments)};_rtn.uncover=function(){return _self.uncover.apply(_self,arguments)};_rtn.close=function(){return _self.close.apply(_self,arguments)};return _rtn};manage.fn=manage.prototype=
{"ajax":function(url,data,callback,type,opts){if(!url||typeof url!=="string")return false;else if(typeof data=="function"){if(callback){opts=type;type=callback}callback=data;data={}}return new Post(url,data,callback,type||"get",opts)},"post":function(url,data,callback,opts){this.ajax(url,data,callback,"post",opts)},"get":function(url,data,callback,opts){this.ajax(url,data,callback,"get",opts)},"error":function(errors){if(typeof errors=="function")errors=[errors];else if(!(errors instanceof Array))return false;
config.errors=config.errors.concat(errors)},confirm:function(title,str){this.alert(title,str,true);return this},"alert":function(title,str,isSuccess,notAdd){if(title){str=str||"";if(!notAdd){Post.fn.items++;Post.fn.dlgItems[Post.fn.items]={title:title,str:str,isSuccess:isSuccess,self:this}}tool.cover();config.modal.title.html(title);config.modal.text.html(str);tool.switchDialogType("display");tool.dialogDisplay();config.modal.icon[(isSuccess?"add":"remove")+"Class"]("icon-ok");config.modal.btn.text(isSuccess?
"\u786e\u5b9a":"\u5173\u95ed")}return this},loading:function(title){title=title||"\u52a0\u8f7d\u4e2d...";this.alert(title);tool.switchDialogType("loading");return this},errorAlert:function(title){title=title||"\u52a0\u8f7d\u5931\u8d25...";this.alert(title);tool.switchDialogType("error");return this},uncover:function(){tool.uncover()},close:function(time,func){if(time)tool.mytimer=setTimeout(function(){tool.dialogClose()},time);else tool.dialogClose();if(typeof func=="function")func();return this}};
manage.fn.constructor=manage;Post=function(url,data,callback,type,opts){opts=tool.getOpts(opts);var _self=this,_opts={"type":type,"url":url+(/\?/.test(url)?"&":"?")+(new Date).getTime(),"data":data,"beforeSend":function(xhr){if(opts.header)for(var a in opts.header)xhr[a]=opts.header[a]},"success":function(rtn){if(typeof rtn=="string")rtn=$.parseJSON(rtn);if(!--_self.items)tool.uncover();for(var i=opts.errors.length;i--;)if(opts.errors[i](rtn)!==undefined)return false;if(callback)callback(rtn)},"error":function(rtn){},
dataType:"json",timeout:opts.timeout};this.items++;if(config.displayLoading)tool.cover();$.ajax(_opts)};Post.fn=Post.prototype;Post.fn.dlgItems={};Post.fn.items=0;tool={cover:function(){config.modal.cover.css({"height":$(document.body).height()}).show()},uncover:function(){config.modal.cover.hide()},getOpts:function(opts){return!opts||typeof opts!=="object"?$.extend(config):function(opts){opts.timeout=opts.timeout||config.timeout;if(opts.header)opts.header=$.extend(config.header,opts.header);return opts}(opts)},
dialogClose:function(){if(tool.mytimer)clearTimeout(tool.mytimer);var _dlg;if(!--Post.fn.items){tool.uncover();config.modal.dialog.hide()}else{_dlg=Post.fn.dlgItems[Post.fn.items];_dlg.self.alert(_dlg.title,_dlg.str,_dlg.isSuccess,true)}},dialogEvent:function(){config.modal.dialog.find("[func='close']").on("click",function(){tool.dialogClose()})},switchDialogType:function(type){var _type={display:1,error:1,loading:1};type=_type[type]?type:"error";config.modal.dialog.find(".c-post-dialog-content").each(function(){var _$this=
$(this);if(_$this.attr("func")==type)_$this.removeClass("hidden");else _$this.addClass("hidden")})},getDialog:function(){var _modal=$("<div class='c-post-dialog'>\t\t\t\t\t\t\t\t<div class='c-post-dialog-container'>\t\t\t\t\t\t\t\t\t<div class='c-post-dialog-cover'></div>\t\t\t\t\t\t\t\t\t<div class='c-post-dialog-body'>\t\t\t\t\t\t\t\t\t\t<h3><span class='close' func='close'>x</span></h3>\t\t\t\t\t\t\t\t\t\t<div class='c-post-dialog-content hidden' func='display'>\t\t\t\t\t\t\t\t\t\t\t<p class='c-post-dialog-icon f-center border-btm'><i func='icon'></i><span func='title'>\u8f93\u5165\u9519\u8bef</span></p>\t\t\t\t\t\t\t\t\t\t\t<p class='f-center m-btm-medium' func='text'></p>\t\t\t\t\t\t\t\t\t\t\t<p class='f-center'><a class='ui-btn-medium  ui-btn-default ui-button secondary large' func='close'>\u5173\u95ed</a></p>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t<div class='c-post-dialog-content s-loading space hidden' func='loading'>\t\t\t\t\t\t\t\t\t\t\t<span func='title'>\u4fe1\u606f\u6b63\u5728\u4fdd\u6301\u4e2d...</span>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t<div class='c-post-dialog-content s-warning space hidden' func='error'>\t\t\t\t\t\t\t\t\t\t\t<span><b func='title'>\u52a0\u8f7d\u5931\u8d25~</b><a href='javascript:;'' role='button' rel='nofollow'>\u7acb\u5373\u5237\u65b0</a></span>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>");
$(document.body).append(_modal);return _modal},dialogDisplay:function(){var _$body=$(document.body),_w;config.modal.cover.height(_$body.height());config.modal.dialog.show();if(!config.modal.display){config.modal.display=true;_w=_$body.width();config.modal.dialog.css({left:(_w-config.modal.dialog.width())/2,top:"50%",marginTop:-config.modal.dialog.outerHeight()/2})}},getCover:function(){var _modal=$("<div>",{"class":"c-post-cover"});$(document.body).append(_modal);return _modal},config:function(){config=
{modal:{cover:tool.getCover(),dialog:tool.getDialog(),display:0,title:0,text:0,btn:0,icon:0},header:{},errors:[],timeout:2E4,displayLoading:false};config.modal.title=config.modal.dialog.find("[func='title']");config.modal.text=config.modal.dialog.find("[func='text']");config.modal.icon=config.modal.dialog.find("[func='icon']");config.modal.btn=config.modal.dialog.find(".ui-button");tool.dialogEvent()}};tool.config();module.exports.post=new manage},{}]},{},[1]);
